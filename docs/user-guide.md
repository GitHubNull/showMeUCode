# ShowMeUCode 用户指南

## 目录
1. [快速开始](#快速开始)
2. [插件配置](#插件配置)
3. [URL匹配规则](#url匹配规则)
4. [提取规则配置](#提取规则配置)
5. [工具类型设置](#工具类型设置)
6. [配置管理](#配置管理)
7. [使用技巧](#使用技巧)
8. [常见问题](#常见问题)

## 快速开始

### 1. 安装插件

1. **获取插件文件**
   - 下载 `showMeUCode-1.0.0.jar` 文件
   - 或从源码构建：`mvn clean package`

2. **加载到Burp Suite**
   - 打开Burp Suite
   - 进入 `Extensions` 标签页
   - 点击 `Add` 按钮
   - 选择 `Java` 作为扩展类型
   - 选择JAR文件路径
   - 点击 `Next` 完成安装

3. **验证安装**
   - 在Extensions列表中看到"ShowMeUCode"
   - 出现"ShowMeUCode"配置标签页

### 2. 基本使用

1. **启用插件**
   ```
   ✅ 启用插件 [已勾选]
   ```

2. **发送测试请求**
   ```bash
   POST /api/gateway HTTP/1.1
   Content-Type: application/json
   
   {
     "method": "getUserInfo",
     "userId": 12345
   }
   ```

3. **查看结果**
   - 在Proxy → HTTP history中查看请求
   - 请求备注栏显示: `getUserInfo`

## 插件配置

### 配置面板布局

```
┌─ ShowMeUCode 配置面板 ────────────────────────────┐
│ ✅ 启用插件    [导出配置] [导入配置]               │
│                                                  │
│ ┌─ 处理工具类型 ─────────────────────────────────┐│
│ │ 工具类型: [Proxy ▼]  ✅ 启用                  ││
│ └──────────────────────────────────────────────┘│
│                                                  │
│ ┌─ 配置选项卡 ─────────────────────────────────┐ │
│ │ [URL匹配规则] [提取规则]                     │ │
│ │                                              │ │
│ │ (配置内容区域)                               │ │
│ │                                              │ │
│ └──────────────────────────────────────────────┘ │
└──────────────────────────────────────────────────┘
```

### 主要控制项

| 控制项 | 功能 | 说明 |
|--------|------|------|
| 启用插件 | 总开关 | 控制插件是否工作 |
| 导出配置 | 配置备份 | 将当前配置导出为JSON文件 |
| 导入配置 | 配置恢复 | 从JSON文件导入配置 |
| 工具类型 | 作用范围 | 选择插件在哪些Burp工具中生效 |

## URL匹配规则

### 规则配置表格

| 规则 | 状态 | 操作 |
|------|------|------|
| `.*api.*` | ✅ | [删除] |
| `.*gateway.*` | ✅ | [删除] |
| `.*service.*` | ✅ | [删除] |

### 添加新规则

1. **在输入框中输入正则表达式**
   ```
   URL正则表达式: [https://example\.com/api/.*]
   ```

2. **点击添加按钮**
   ```
   [添加]
   ```

3. **常用正则表达式示例**
   ```regex
   .*api.*                    # 匹配包含"api"的URL
   ^https://example\.com.*    # 匹配特定域名
   .*/v[0-9]+/.*             # 匹配版本化API
   .*\.(json|xml)$           # 匹配特定文件扩展名
   ```

### 规则验证
- 插件会自动验证正则表达式语法
- 无效的正则表达式会显示错误提示
- 建议在正则表达式测试工具中先验证

## 提取规则配置

### 规则类型

| 类型 | 描述 | 适用场景 |
|------|------|----------|
| 正则表达式 | 模式匹配 | 各种文本格式 |
| JSON路径 | JSONPath语法 | JSON格式数据 |
| XPath | XML路径语法 | XML格式数据 |

### 配置示例

#### 1. JSON格式提取

**数据示例**:
```json
{
  "method": "getUserInfo",
  "action": "query",
  "data": {
    "operation": "select"
  }
}
```

**提取规则**:
| 类型 | 规则 | 提取结果 |
|------|------|----------|
| 正则表达式 | `"method"\s*:\s*"([^"]+)"` | getUserInfo |
| JSON路径 | `$.method` | getUserInfo |
| JSON路径 | `$.data.operation` | select |

#### 2. XML格式提取

**数据示例**:
```xml
<request>
  <methodName>updateUser</methodName>
  <params>
    <action>update</action>
  </params>
</request>
```

**提取规则**:
| 类型 | 规则 | 提取结果 |
|------|------|----------|
| XPath | `//methodName/text()` | updateUser |
| XPath | `//action/text()` | update |
| 正则表达式 | `<methodName>([^<]+)</methodName>` | updateUser |

#### 3. 表单数据提取

**数据示例**:
```
action=login&username=admin&method=authenticate
```

**提取规则**:
| 类型 | 规则 | 提取结果 |
|------|------|----------|
| 正则表达式 | `action=([^&]+)` | login |
| 正则表达式 | `method=([^&]+)` | authenticate |

### JSON路径语法参考

| 语法 | 描述 | 示例 |
|------|------|------|
| `$` | 根节点 | `$.method` |
| `.` | 子节点 | `$.data.action` |
| `[]` | 数组索引 | `$.items[0]` |
| `*` | 通配符 | `$.data.*` |

### XPath语法参考

| 语法 | 描述 | 示例 |
|------|------|------|
| `//` | 任意深度 | `//methodName` |
| `/` | 直接子节点 | `/root/method` |
| `text()` | 文本内容 | `//method/text()` |
| `@attr` | 属性值 | `//@name` |

## 工具类型设置

### 支持的工具类型

| 工具 | 英文名 | 典型用途 |
|------|--------|----------|
| 代理 | Proxy | 被动拦截浏览器请求 |
| 入侵者 | Intruder | 自动化攻击测试 |
| 日志器 | Logger | 记录HTTP流量 |
| 扩展 | Extensions | 插件和扩展功能 |

### 配置建议

- **测试阶段**: 启用Proxy和Intruder
- **渗透测试**: 启用所有支持的工具类型
- **流量分析**: 启用Proxy和Logger
- **插件联动**: 启用Extensions

## 配置管理

### 导出配置

1. **点击"导出配置"按钮**
2. **选择保存路径**
3. **文件格式**: JSON
4. **文件名示例**: `showMeUCode-config.json`

**导出的JSON结构**:
```json
{
  "enabled": true,
  "urlPatterns": [
    {
      "pattern": ".*api.*",
      "enabled": true
    }
  ],
  "extractionRules": [
    {
      "ruleType": "REGEX",
      "pattern": "\"method\"\\s*:\\s*\"([^\"]+)\"",
      "enabled": true
    }
  ]
}
```

### 导入配置

1. **点击"导入配置"按钮**
2. **选择JSON配置文件**
3. **确认覆盖当前配置**
4. **配置自动应用**

### 配置迁移场景

- **多台机器同步**: 导出配置到共享目录
- **版本备份**: 定期导出重要配置
- **环境切换**: 不同测试环境使用不同配置

## 使用技巧

### 1. 规则优先级

- 提取规则按列表顺序执行
- 第一个匹配的规则获胜
- 调整规则顺序可改变优先级

### 2. 性能优化

- **精确URL匹配**: 避免过于宽泛的URL规则
- **简单提取规则**: 优先使用JSON路径而非复杂正则
- **适当的工具类型**: 不在不需要的工具中启用

### 3. 调试技巧

- **查看Burp日志**: Extensions → ShowMeUCode → Output
- **单步测试**: 使用Repeater测试单个请求
- **规则验证**: 在线工具验证正则表达式和JSON路径

### 4. 规则编写建议

**正则表达式**:
```regex
# 推荐：精确匹配
"method"\s*:\s*"([^"]+)"

# 避免：过于宽泛
.*method.*
```

**JSON路径**:
```javascript
// 推荐：明确路径
$.api.method

// 可选：带默认值的处理
$.method || $.action
```

## 常见问题

### Q1: 插件没有提取到接口名称？

**排查步骤**:
1. 检查URL是否匹配规则
2. 检查提取规则是否正确
3. 检查请求体格式是否支持
4. 查看Burp日志是否有错误

### Q2: 正则表达式不匹配？

**解决方案**:
1. 使用在线正则测试工具验证
2. 注意转义字符（Java中需要双重转义）
3. 检查大小写敏感性
4. 验证数据格式是否一致

### Q3: JSON路径提取失败？

**可能原因**:
1. JSON格式不正确
2. 路径语法错误
3. 字段不存在
4. 数据类型不匹配

### Q4: 配置丢失问题？

**解决方案**:
1. 定期导出配置备份
2. 检查Burp Suite配置文件权限
3. 重新加载插件后检查配置

### Q5: 性能影响？

**优化建议**:
1. 限制URL匹配范围
2. 简化提取规则
3. 只在必要的工具中启用
4. 监控内存使用情况

## 联系支持

如有其他问题，请通过以下方式联系：

- **GitHub Issues**: https://github.com/GitHubNull/showMeUCode/issues
- **项目文档**: 查看 `docs/` 目录
- **代码注释**: 源码包含详细注释

---

*本指南会持续更新，欢迎提供改进建议！* 