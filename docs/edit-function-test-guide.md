# ShowMeUCode 表格编辑功能测试指南

## 🎯 测试目的
验证配置面板中表格的编辑功能是否正常工作，包括规则内容编辑、状态切换、类型选择等功能。

## 📋 测试环境
- Burp Suite Professional/Community 2020.12+
- Java 17+
- showMeUCode v1.0.0（已修复版本）

## 🔧 功能测试项目

### 1. URL匹配规则编辑测试

#### 1.1 规则内容编辑
**测试步骤**：
1. 进入ShowMeUCode配置面板
2. 切换到"URL匹配规则"标签页
3. 双击任意规则的"规则"列单元格
4. 修改正则表达式内容（例如：将`.*api.*`改为`.*api/v1.*`）
5. 按Enter键确认修改

**期望结果**：
- ✅ 单元格进入编辑状态
- ✅ 修改内容后自动保存到配置
- ✅ Burp日志中显示"已更新URL匹配规则"记录
- ✅ 无效的正则表达式会弹出错误提示并恢复原值

#### 1.2 状态切换测试
**测试步骤**：
1. 点击任意规则的"状态"列复选框
2. 观察状态变化

**期望结果**：
- ✅ 复选框状态正常切换
- ✅ Burp日志中显示"已启用"或"已禁用"记录
- ✅ 状态更改立即保存到配置

#### 1.3 表格选择测试
**测试步骤**：
1. 点击表格中的任意行
2. 使用键盘方向键导航
3. 验证行选择高亮效果

**期望结果**：
- ✅ 能够正常选择表格行
- ✅ 选中行有明显的高亮显示
- ✅ 键盘导航正常工作

### 2. 提取规则编辑测试

#### 2.1 规则类型编辑
**测试步骤**：
1. 切换到"提取规则"标签页
2. 双击任意规则的"类型"列单元格
3. 从下拉框中选择不同的规则类型
4. 确认选择

**期望结果**：
- ✅ 出现规则类型下拉框
- ✅ 包含所有可用类型（正则表达式、JSON路径、XPath、表单数据）
- ✅ 选择后更新配置并记录日志

#### 2.2 规则内容编辑
**测试步骤**：
1. 双击任意规则的"规则"列单元格
2. 修改规则内容（例如：将`$.method`改为`$.action`）
3. 按Enter键确认

**期望结果**：
- ✅ 单元格进入编辑状态
- ✅ 修改内容自动保存
- ✅ Burp日志记录修改操作
- ✅ 空值会恢复原内容

#### 2.3 状态切换测试
**测试步骤**：
1. 点击任意规则的"状态"列复选框
2. 观察状态变化

**期望结果**：
- ✅ 复选框状态正常切换
- ✅ 日志记录状态变更
- ✅ 配置实时保存

### 3. 数据验证测试

#### 3.1 正则表达式验证
**测试步骤**：
1. 在URL匹配规则中输入无效正则表达式（如：`[unclosed`）
2. 尝试保存

**期望结果**：
- ✅ 弹出错误提示对话框
- ✅ 内容恢复为原始值
- ✅ 不会破坏配置文件

#### 3.2 空值处理
**测试步骤**：
1. 尝试将规则内容清空
2. 保存修改

**期望结果**：
- ✅ 空值被拒绝
- ✅ 内容恢复为原始值
- ✅ 无错误或异常

### 4. 配置持久化测试

#### 4.1 编辑后重启测试
**测试步骤**：
1. 编辑几个规则的内容和状态
2. 重启Burp Suite
3. 重新加载插件
4. 检查配置是否保持

**期望结果**：
- ✅ 所有修改的内容都被保留
- ✅ 状态设置正确恢复
- ✅ 无配置丢失

#### 4.2 导入导出测试
**测试步骤**：
1. 编辑一些规则
2. 导出配置到JSON文件
3. 清空配置后重新导入
4. 验证编辑的内容是否正确恢复

**期望结果**：
- ✅ 导出的JSON包含所有编辑内容
- ✅ 导入后完全恢复编辑状态
- ✅ 无数据丢失或损坏

### 5. 交互体验测试

#### 5.1 快速编辑测试
**测试步骤**：
1. 连续快速编辑多个单元格
2. 使用Tab键在单元格间切换
3. 混合使用鼠标和键盘操作

**期望结果**：
- ✅ 所有操作响应流畅
- ✅ 无界面卡顿或异常
- ✅ Tab键切换正常工作

#### 5.2 并发操作测试
**测试步骤**：
1. 在编辑过程中尝试其他操作（如添加新规则）
2. 在编辑状态下尝试删除规则
3. 编辑过程中尝试导入配置

**期望结果**：
- ✅ 操作不会冲突
- ✅ 数据一致性保持
- ✅ 无异常或错误

## ✅ 测试检查清单

### URL匹配规则编辑
- [ ] 规则内容可以编辑
- [ ] 状态复选框可以切换
- [ ] 正则表达式验证工作正常
- [ ] 编辑后自动保存
- [ ] 日志记录完整

### 提取规则编辑
- [ ] 规则类型下拉框正常
- [ ] 规则内容可以编辑
- [ ] 状态复选框可以切换
- [ ] 编辑后自动保存
- [ ] 日志记录完整

### 数据验证
- [ ] 无效输入被正确处理
- [ ] 空值输入被拒绝
- [ ] 错误提示友好清晰
- [ ] 原值恢复机制正常

### 配置管理
- [ ] 修改实时保存
- [ ] 重启后配置保持
- [ ] 导入导出包含编辑内容
- [ ] 无数据丢失

### 用户体验
- [ ] 表格选择正常
- [ ] 键盘导航工作
- [ ] 界面响应流畅
- [ ] 无操作冲突

## 🚨 常见问题排查

### Q1: 双击单元格无法进入编辑状态
**解决方案**：
- 确认使用的是最新修复版本
- 检查单元格是否被设置为可编辑
- 查看Java控制台是否有错误

### Q2: 编辑内容没有保存
**解决方案**：
- 确认按Enter键确认编辑
- 检查配置管理器的saveConfig方法
- 查看Burp日志是否有保存记录

### Q3: 状态复选框点击无效
**解决方案**：
- 确认复选框列的数据类型设置正确
- 检查setValueAt方法是否被正确调用
- 验证配置对象的setEnabled方法

### Q4: 下拉框不显示
**解决方案**：
- 确认DefaultCellEditor正确设置
- 检查RuleType的getDisplayName方法
- 验证JComboBox的数据源

## 📊 测试报告模板

**测试日期**: _____________  
**测试人员**: _____________  
**版本信息**: showMeUCode v1.0.0  

**URL匹配规则编辑**:
- 内容编辑: ✅ / ❌
- 状态切换: ✅ / ❌
- 验证功能: ✅ / ❌

**提取规则编辑**:
- 类型选择: ✅ / ❌
- 内容编辑: ✅ / ❌
- 状态切换: ✅ / ❌

**数据验证**:
- 输入验证: ✅ / ❌
- 错误处理: ✅ / ❌
- 恢复机制: ✅ / ❌

**配置管理**:
- 实时保存: ✅ / ❌
- 持久化: ✅ / ❌
- 导入导出: ✅ / ❌

**用户体验**:
- 界面响应: ✅ / ❌
- 操作流畅性: ✅ / ❌
- 键盘支持: ✅ / ❌

**发现问题**:
1. ________________________________
2. ________________________________
3. ________________________________

**测试结论**: 
□ 所有功能正常，可以发布  
□ 存在轻微问题，可以发布  
□ 存在严重问题，需要修复

---

**编辑功能已全面修复！** 🎉  
现在用户可以：
- 直接在表格中编辑规则内容
- 点击复选框切换启用状态  
- 从下拉框选择规则类型
- 实时保存所有修改
- 享受流畅的编辑体验 